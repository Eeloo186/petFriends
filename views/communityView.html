<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<style>
    h1 {
        margin-bottom: 0;
    }
    h2 {
        margin-top: 0;
    }
    .date {
        color: gray;
        font-size: 14px;
        margin-bottom: 20px;
    }
    .content {
        line-height: 1.5;
        margin-bottom: 30px;
    }
</style>
<body>
</div>
<div class="container mt-5">
    <div class="row">
        <div class="col-sm-12">
            <h2>제  목{{twits.title}}</h2>
            <h5>작성자{{twits.User.nickname}}, Dec-07-2020, 조회수 00</h5>
            <div class="fakeimg">내 용{{twits.Content.content}}</div>
            <p>댓 글 ...</p>
            <a href="/page/community?currentPage=1"><button type="button" class="btn btn-primary">like</button></a>
            <a href="/page/community?currentPage=1"><button type="button" class="btn btn-primary justify-content-end">목 록</button></a>
        </div>
    </div>
</div>
</body>

<script>
    if (document.getElementById('img')) {
        document.getElementById('img').addEventListener('change', function(e) {
            const formData = new FormData();
            formData.append('img', this.files[0]);
            console.log('-------');
            for ( let key of formData.keys()) {
                console.log(key, ":", formData.get(key));
            }
            console.log('-------');
            axios.post('/post/img', formData)
                .then((res) => {
                    document.getElementById('img-url').value = res.data.url;
                    document.getElementById('img-preview').src = res.data.url;
                    document.getElementById('img-preview').style.display = 'inline';
                })
                .catch((err) => {
                    console.error(err);
                });
        });
    }
    document.querySelectorAll('.twit-follow').forEach(function(tag) {
        tag.addEventListener('click', function() {
            const myId = document.querySelector('#my-id');
            if (myId) {
                const userId = tag.parentNode.querySelector('.twit-user-id').value;
                if (userId !== myId.value) {
                    if (confirm('팔로잉하시겠습니까?')) {
                        axios.post(`/user/${userId}/follow`)
                            .then(() => {
                                location.reload();
                            })
                            .catch((err) => {
                                console.error(err);
                            });
                    }
                }
            }
        });
    });
</script>
</html>





